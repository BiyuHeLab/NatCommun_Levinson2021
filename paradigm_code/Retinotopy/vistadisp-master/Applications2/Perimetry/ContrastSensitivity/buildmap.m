function map=buildmap(display,stimParams,answerarray,anspositionarray)%Initializing Map% Middle intesity for positions not evaluatedmap = 127*ones(display.numPixels(2),display.numPixels(1));for n=1:size(answerarray,2)	answer = answerarray(n);	x0=ceil(anspositionarray(n,2)-size(stimParams.image,2)/2);y0=ceil(anspositionarray(n,1)-size(stimParams.image,1)/2);		if answer=='y'			 				%Fill the portion of map				for (j=1:size(stimParams.image,2))						for (k=1:size(stimParams.image,1))						    if (y0+k<=size(map,1) & x0+j<=size(map,2) & y0+k>=1 & x0+j>1)								map(y0+k,x0+j)=255;							end													end				end										else								for (j=1:size(stimParams.image,2))						for (k=1:size(stimParams.image,1))						   if (y0+k<=size(map,1) & x0+j<=size(map,2) & y0+k>=1 & x0+j>1 )								map(y0+k,x0+j)=0;						   end						end										end	 			 	end	end