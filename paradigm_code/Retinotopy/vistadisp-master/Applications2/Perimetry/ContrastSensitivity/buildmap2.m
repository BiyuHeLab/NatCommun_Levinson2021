function map=buildmap2(display,stimParams,results)% map=buildmap2(display,stimParams,results) % To show results from perimetry test% after this command do showmap(map) to plot it% April 2004% Claudiocontrast2=results.contrast2;positiontask2=results.positiontask2;contrast3=results.contrast3;positiontask3=results.positiontask3;%Initializing Map% Middle intesity for positions not evaluatedmap = 0*ones(display.numPixels(2),display.numPixels(1));%Plotting result task2for n=1:size(positiontask2,1)	x0=ceil(positiontask2(n,2)-size(stimParams.image,2)/2);y0=ceil(positiontask2(n,1)-size(stimParams.image,1)/2);						for (j=1:size(stimParams.image,2))						for (k=1:size(stimParams.image,1))						    if (y0+k<=size(map,1) & x0+j<=size(map,2) & y0+k>=1 & x0+j>1)								map(y0+k,x0+j)=contrast2(n);							end													end		      		end															 end	for n=1:size(positiontask3,1)	x0=ceil(positiontask3(n,2)-size(stimParams.image,2)/2);y0=ceil(positiontask3(n,1)-size(stimParams.image,1)/2);						for (j=1:size(stimParams.image,2))						for (k=1:size(stimParams.image,1))						    if (y0+k<=size(map,1) & x0+j<=size(map,2) & y0+k>=1 & x0+j>1)								map(y0+k,x0+j)=contrast3(n);							end													end		      		end															 end	